#include "fluidParticleCommons.hs"

layout (local_size_x = 256, local_size_y = 1, local_size_z = 1) in;
void main() 
{
    uint globalThreadID = gl_GlobalInvocationID.x;
    uint localThreadID = gl_LocalInvocationID.x;
    uint groupID = gl_WorkGroupID.x;

	if (globalThreadID >= g_particleVariables.numberOfParticles)
		return;
		
	uint key = globalSpatialLookupKeyIndexList[globalThreadID].x;
	uint keyPrevious = globalThreadID == 0u ? 0xffff : globalSpatialLookupKeyIndexList[globalThreadID - 1].x;
	if (key != keyPrevious)
	{
		globalSpatialLookupStartIndices[key] = globalThreadID;
	}
}